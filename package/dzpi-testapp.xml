<package id="superapp">
  <!-- 3. Мультиплатформенные версии -->
  <versions>
    <version num="2.5.0">
      <!-- Варианты для разных ОС -->
      <artifacts>
        <!-- Linux -->
        <artifact os="linux" arch="x86_64">
          <pkg type="zip" hash="55b55ecb9d888c825b7998a6311a40e0f4ec921514f8cebec614352929a3481f" url="https://github.com/TimeStop34/DZPI-Packages/releases/download/ert/test.zip"/>
          <pkg type="appimage" url="https://.../superapp.AppImage"/>
          <commands>
            <install>make install</install>
            <uninstall>make uninstall</uninstall>
          </commands>
        </artifact>
        
        <!-- Windows -->
        <artifact os="windows" arch="x86_64">
          <pkg type="msi" url="https://.../superapp.msi"/>
          <pkg type="zip" url="https://.../superapp-win64.zip"/>
          <registry-keys>
            <key path="HKCU\Software\SuperApp" name="InstallDir"/>
          </registry-keys>
        </artifact>
        
        <!-- macOS Universal Binary -->
        <artifact os="macos" arch="universal">
          <pkg type="brew" url="https://.../superapp.dmg"/>
          <brew>dazdividez/superapp</brew> <!-- Формула Homebrew -->
        </artifact>
      </artifacts>
      
      <!-- 4. Кроссплатформенные зависимости -->
      <dependencies>
        <cross-platform>
          <runtime name=".NET" version="8.0" />
          <runtime name="Java" min-version="11" />
        </cross-platform>
        
        <os-specific>
          <linux>
            <lib name="libgtk-3.so.0"/>
            <package manager="apt" name="libssl-dev"/>
          </linux>
          <windows>
            <dll name="vcruntime140.dll"/>
          </windows>
        </os-specific>
      </dependencies>
    </version>
  </versions>

  <!-- 5. Платформо-специфичные настройки -->
  <integration>
    <!-- Linux -->
    <linux>
      <systemd>
        <service name="superappd" exec="/opt/superapp/daemon"/>
      </systemd>
      <apparmor profile="superapp"/>
    </linux>
    
    <!-- Windows -->
    <windows>
      <wix-installer id="superapp.wxs"/> <!-- WiX-конфиг -->
      <autostart>
        <task name="SuperAppBackground"/>
      </autostart>
    </windows>
    
    <!-- macOS -->
    <macos>
      <plist>com.dazdividez.superapp.plist</plist> <!-- LaunchAgent -->
      <signature team-id="ABCD1234"/> <!-- Apple Developer Team ID -->
    </macos>
  </integration>
</package>
